{% macro cropped(image, options) %}
  {% spaceless %}
    {% if image %}
      {% set defaults = {
        quality: 100,
        class: '',
        attrs: '',
      } %}

      {% set options = defaults|merge(options) %}

      {% set dimensions = {
        mode: 'crop',
        width: options.width,
        height: options.height,
        quality: options.quality,
        position: 'center-center'
      } %}

      <img
        class="{{ options.class }}"
        src="{{ image.getUrl(dimensions) }}"
        alt="{{ image.altText ?? image.title }}"
        {{ options.attrs }}
      >
    {% endif %}
  {% endspaceless %}
{% endmacro %}


{% macro fit(image, options) %}
  {% spaceless %}
    {% if image %}
      {% set defaults = {
        quality: 100,
        class: '',
        attrs: '',
      } %}

      {% set options = defaults|merge(options) %}

      {% if options.width is defined %}
        {% set dimensions = {
          mode: 'fit',
          width: options.width
        } %}
      {% elseif options.height is defined %}
        {% set dimensions = {
          mode: 'fit',
          height: options.height
        } %}
      {% endif %}

      <img
        class="{{ options.class }}"
        src="{{ image.getUrl(dimensions) }}"
        alt="{{ image.altText ?? image.title }}"
        {{ options.attrs }}
      >
    {% endif %}
  {% endspaceless %}
{% endmacro %}

{% macro backgroundCropped(image, options) %}
  {% spaceless %}
    {% if image %}
      {% set defaults = {
        quality: 100,
        styles: '',
      } %}

      {% set options = defaults|merge(options) %}

      {% set dimensions = {
        mode: 'crop',
        width: options.width,
        height: options.height,
        quality: options.quality,
        position: 'center-center'
      } %}

      style="background-image: url('{{ image.getUrl(dimensions) }}');{{ options.styles }}"
    {% endif %}
  {% endspaceless %}
{% endmacro %}

{% macro backgroundFit(image, options) %}
  {% spaceless %}
    {% if image %}
      {% set defaults = {
        quality: 100,
        styles: '',
      } %}

      {% set options = defaults|merge(options) %}

      {% if options.width is defined %}
        {% set dimensions = {
          mode: 'fit',
          width: options.width
        } %}
      {% elseif options.height is defined %}
        {% set dimensions = {
          mode: 'fit',
          height: options.height
        } %}
      {% endif %}

      style="background-image: url('{{ image.getUrl(dimensions) }}');{{ options.styles }}"
    {% endif %}
  {% endspaceless %}
{% endmacro %}
